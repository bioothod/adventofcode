from sympy import symbols, nonlinsolve

rx, ry, rz, kx, ky, kz = symbols('rx, ry, rz, kx, ky, kz', real=False)


data1 = [
    (19, 13, 30, -2, 1, -2),
    (18, 19, 22, -1, -1, -2),
    (20, 25, 34, -2, -2, -4),
    (12, 31, 28, -1, -2, -1)
]

data = [
    (    206273907288897, 404536114337943, 197510451330134 , -18, 6, 92),
    (   318919383845607, 260745469021671, 223155534318195 , -78, 62, 75),
    (  379055259398812, 255495760772511, 396757430832289 , -179, -18, -373),
    ( 137846644978100, 12046037245139, 105153704719816 , 124, 454, 225),
    (309711358603762, 225946158383867, 189873851968750 , 37, 26, 191),
    (378104097168921, 200689272215862, 254730120537801 , -124, -97, -71),
    (300292128113052, 256013171490309, 260169046009932 , 22, -11, -11),
    (340024527023616, 317448015546650, 328533050601313 , -75, -185, -195),

]

eqs = []
for g in data:
    x, y, z, vx, vy, vz = g

    eq_xy = (x - rx) * (ky - vy) - (y - ry) * (kx - vx)
    eq_xz = (x - rx) * (kz - vz) - (z - rz) * (kx - vx)
    eq_yz = (y - ry) * (kz - vz) - (z - rz) * (ky - vy)
    eqs += [eq_xy, eq_xz, eq_yz]

sol = nonlinsolve(eqs, [rx, ry, rz, kx, ky, kz])

print(sol)
